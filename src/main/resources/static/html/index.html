<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>홈페이지</title>
</head>
<body>
<h1> 메인 홈페이지 입니다.</h1>
<button id="mypageBtn">마이페이지</button>
<button id="userpageBtn">유저페이지</button>
<script>
  document.getElementById("mypageBtn").addEventListener('click', event => {
    //window.location.href = "/mypage/test";
    fetch("/api/mypage/info", {
      method: "GET", // GET 요청
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => response.json()) // 서버에서 보낸 응답을 JSON 형식으로 변환
    .then(data => {
      if (data.code !== "200") { // 오류 발생 시
        alert(data.message);
        console.log("fetchMyPage 응답 에러 발생 >> " + data.message);
        window.location.href = "/";
      } else { // 성공적인 응답 시
        window.location.href = `/mypage/${data.nickname}`;
      }
    })
    .catch(error => {
      console.log("서버 오류 발생:" + error);
    });
  });
  document.getElementById("userpageBtn").addEventListener('click', event => {
    window.location.href = "/mypage/test";
  });

</script>
